<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
   'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
  <html xmlns='http://www.w3.org/1999/xhtml'>
    <head>
      <meta http-equiv='content-type' content='text/html; charset=utf-8' />
      <meta name='generator' content='CoverStory' />
      <link rel=StyleSheet href='coverstory.css' type='text/css'>
      <script src='coverstory.js' language='javascript' type='text/javascript'></script>
      <title>MiscMergeTemplate.m</title>
    </head>
    <body id='coverstory' onload='coverstory_load()' onunload='coverstory_unload()'>
      <div id='maincontainer'>
        <h1 id='sourcename'>MiscMergeTemplate.m</h1>
        <h2 id='sourcepath'>/Volumes/Data/Development/GitHub/MiscMerge/MiscMerge/MiscMergeTemplate.m</h2>
        <div id='sourcedate'>2/6/2014, 9:29 PM</div>
        <div id='filelistcontainer'>
          <div id='filesummary'>48.8% of 2267 lines</div>
          <table id='filetable'>
            <tr id='filelistheader'>
              <th id='filelistheadersource'>Source</th>
              <th id='filelistheaderpercent'>%</th>
            </tr>
            <tr class='fileline'>
<td class='filename'><a href='_MiscMergeDelayedParseCommand.h.html'>_MiscMergeDelayedParseCommand.h</a></td>
<td class='filepercent'><span class='filelessthan25percent'>0.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeDelayedParseCommand.m.html'>_MiscMergeDelayedParseCommand.m</a></td>
<td class='filepercent'><span class='filelessthan25percent'>0.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIncludeCommand.h.html'>_MiscMergeIncludeCommand.h</a></td>
<td class='filepercent'><span class='filelessthan25percent'>0.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeOptionCommand.h.html'>_MiscMergeOptionCommand.h</a></td>
<td class='filepercent'><span class='filelessthan25percent'>0.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeOptionCommand.m.html'>_MiscMergeOptionCommand.m</a></td>
<td class='filepercent'><span class='filelessthan25percent'>16.25</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeProcedureCommand.m.html'>_MiscMergeProcedureCommand.m</a></td>
<td class='filepercent'><span class='filelessthan25percent'>24.74</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeForeachCommand.m.html'>_MiscMergeForeachCommand.m</a></td>
<td class='filepercent'><span class='filelessthan35percent'>25.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeExpression.m.html'>MiscMergeExpression.m</a></td>
<td class='filepercent'><span class='filelessthan35percent'>27.56</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeSetCommand.m.html'>_MiscMergeSetCommand.m</a></td>
<td class='filepercent'><span class='filelessthan35percent'>28.21</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeLoopCommand.m.html'>_MiscMergeLoopCommand.m</a></td>
<td class='filepercent'><span class='filelessthan35percent'>29.82</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIndexCommand.m.html'>_MiscMergeIndexCommand.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>38.89</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='NSString+MiscAdditions.m.html'>NSString+MiscAdditions.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>42.13</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeElseifCommand.m.html'>_MiscMergeElseifCommand.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>42.86</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeNextCommand.m.html'>_MiscMergeNextCommand.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>42.86</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeOmitCommand.m.html'>_MiscMergeOmitCommand.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>42.86</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeCallCommand.m.html'>_MiscMergeCallCommand.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>43.48</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIncludeCommand.m.html'>_MiscMergeIncludeCommand.m</a></td>
<td class='filepercent'><span class='filelessthan45percent'>43.48</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeFunctions.m.html'>MiscMergeFunctions.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>45.68</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeDebugCommand.m.html'>_MiscMergeDebugCommand.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>46.15</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeEngine.m.html'>MiscMergeEngine.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>49.80</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeContinueCommand.m.html'>_MiscMergeContinueCommand.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>50.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeDateCommand.m.html'>_MiscMergeDateCommand.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>50.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeCommand.m.html'>MiscMergeCommand.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>53.16</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeWhileCommand.m.html'>_MiscMergeWhileCommand.m</a></td>
<td class='filepercent'><span class='filelessthan55percent'>54.17</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeEngine.h.html'>MiscMergeEngine.h</a></td>
<td class='filepercent'><span class='filelessthan65percent'>55.56</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeBreakCommand.m.html'>_MiscMergeBreakCommand.m</a></td>
<td class='filepercent'><span class='filelessthan65percent'>63.64</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='NSScanner+MiscMerge.m.html'>NSScanner+MiscMerge.m</a></td>
<td class='filepercent'><span class='filelessthan75percent'>66.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeForeachCommand.h.html'>_MiscMergeForeachCommand.h</a></td>
<td class='filepercent'><span class='filelessthan75percent'>66.67</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIndexCommand.h.html'>_MiscMergeIndexCommand.h</a></td>
<td class='filepercent'><span class='filelessthan75percent'>66.67</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeDriver.m.html'>MiscMergeDriver.m</a></td>
<td class='filepercent'><span class='filelessthan75percent'>69.49</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeTemplate.m.html'>MiscMergeTemplate.m</a></td>
<td class='filepercent'><span class='filelessthan75percent'>72.53</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeCallCommand.h.html'>_MiscMergeCallCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>75.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndforeachCommand.m.html'>_MiscMergeEndforeachCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>83.33</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndloopCommand.m.html'>_MiscMergeEndloopCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>83.33</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndprocedureCommand.m.html'>_MiscMergeEndprocedureCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>83.33</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeTemplate.h.html'>MiscMergeTemplate.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>83.33</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeCommentCommand.m.html'>_MiscMergeCommentCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>87.50</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndwhileCommand.m.html'>_MiscMergeEndwhileCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>88.89</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeCopyCommand.m.html'>_MiscMergeCopyCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>92.86</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIfCommand.m.html'>_MiscMergeIfCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>93.94</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='KeyValue+MiscMerge.m.html'>KeyValue+MiscMerge.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='NSCharacterSet+MiscMerge.m.html'>NSCharacterSet+MiscMerge.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeCopyCommand.h.html'>_MiscMergeCopyCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeDateCommand.h.html'>_MiscMergeDateCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeDebugCommand.h.html'>_MiscMergeDebugCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeElseCommand.m.html'>_MiscMergeElseCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndforeachCommand.h.html'>_MiscMergeEndforeachCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndifCommand.m.html'>_MiscMergeEndifCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndloopCommand.h.html'>_MiscMergeEndloopCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeEndprocedureCommand.h.html'>_MiscMergeEndprocedureCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeFieldCommand.h.html'>_MiscMergeFieldCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeFieldCommand.m.html'>_MiscMergeFieldCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIdentifyCommand.m.html'>_MiscMergeIdentifyCommand.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeIfCommand.h.html'>_MiscMergeIfCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeLoopCommand.h.html'>_MiscMergeLoopCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeProcedureCommand.h.html'>_MiscMergeProcedureCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeSetCommand.h.html'>_MiscMergeSetCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='_MiscMergeWhileCommand.h.html'>_MiscMergeWhileCommand.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeCommandBlock.h.html'>MiscMergeCommandBlock.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeCommandBlock.m.html'>MiscMergeCommandBlock.m</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeDriver.h.html'>MiscMergeDriver.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>
<tr class='fileline'>
<td class='filename'><a href='MiscMergeMacros.h.html'>MiscMergeMacros.h</a></td>
<td class='filepercent'><span class='filegoodcoveragepercent'>100.00</span></td>
</tr>

          </table>
        </div>
        <div id='sourcecontainer'>
          <div id='sourcesummary'>Executed 72.5% of 182 lines (132 executed, 182 executable, 434 total lines)</div>
          <table id='sourcetable'>
          <tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  MiscMergeTemplate.m</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  Written by Don Yacktman and Carl Lindberg</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  Copyright 2001-2004 by Don Yacktman and Carl Lindberg.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  All rights reserved.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//      This notice may not be removed from this source code.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  This header is included in the MiscKit by permission from the author</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  and its use is governed by the MiscKit license, found in the file</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  &quot;License.rtf&quot; in the MiscKit distribution.  Please refer to that file</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//  for a list of all applicable permissions and restrictions.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>//</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;MiscMergeTemplate.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &lt;Foundation/NSCharacterSet.h&gt;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &lt;Foundation/NSArray.h&gt;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &lt;Foundation/NSAutoreleasePool.h&gt;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &lt;Foundation/NSObjCRuntime.h&gt;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;NSString+MiscAdditions.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;NSScanner+MiscMerge.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;MiscMergeCommand.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;MiscMergeCommandBlock.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;_MiscMergeFieldCommand.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;_MiscMergeCopyCommand.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;_MiscMergeDelayedParseCommand.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;MiscMergeFunctions.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>#import &quot;MiscMergeMacros.h&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>@interface MiscMergeTemplate ()</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>@property (strong, nonatomic, readwrite) MiscMergeCommandBlock *topLevelCommandBlock;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>490</td>
<td class='sourcelinehit'>@property (strong, nonatomic) NSMutableArray *commandStack;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>@property (assign, nonatomic) NSUInteger lineNumber;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>@end</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>@implementation MiscMergeTemplate</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * This class contains the template that is used by a merge engine. It</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * performs two functions:  (1) parse a string or text file into the</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * commands required by a merge ending and (2) act as a container for the</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * commands once they have been parsed, providing them to a merge engine as</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * needed.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> *</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Typically, MiscMergeTemplate objects are used in a very simple way: they</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * are instantiated, given the ASCII text or string to parse, and then</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * passed to MiscMergeEngine instances as needed.  That&apos;s it!</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> *</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * It should be noted that template text which is simply copied from the</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * template into the merged output (i.e. any text outside of a merge</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * command) is actually turned into a special &quot;copy&quot; command by the parsing</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * algorithm. This allows the merge engine to deal exclusively with</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * MiscMergeCommand subclasses to perform a merge.  This implementation</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * detail should not affect anything that would normally be done with this</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * object, but it is important to understand this fact if attempting to</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * understand the data structure created by the parsing routines.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> *</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * If a command string contains merge commands inside itself, then a</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * special &quot;delayed command&quot; class will used.  That class will, during a</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * merge, create an engine, perform a merge on its text, and then parse</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * itself into the correct type of command.  This allows merges to contain</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * commands that change depending upon the data records.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> *</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Commands created while parsing are always added to the &quot;current&quot; command</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * block.  By using -#pushCommandBlock: and -#popCommandBlock,</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * MiscMergeCommand subclasses can temporarily substitute their own command</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * block to be the &quot;current&quot; block during the parsing process.  This way,</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * container-type commands such as if clauses and loops can know which</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * commands they hold.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Returns the default string used to start a merge command, &quot;´&quot;.  A</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * subclass of MiscMergeTemplate could override this method.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>+ (NSString *)defaultStartDelimiter</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    //  return @&quot;(&quot;;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    //  return @&quot;´&quot;;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    /* This works better for whatever reason. Due to some unknown pecularities,</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    a constant NSString doesn&apos;t work under Windows with Apple&apos;s</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    implementation. </td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>     Unicode character      Oct     Dec  Hex     HTML</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>     ´  acute accent        0264  180  0xB4  &amp;acute;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>     */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>    unichar achar = 0xB4;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>    return [NSString stringWithCharacters:&amp;achar length:1];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Returns the default string used to end a merge command, &quot;ª&quot;.  A</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * subclass of MiscMergeTemplate could override this method.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>3</td>
<td class='sourcelinehit'>+ (NSString *)defaultEndDelimiter</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    //  return @&quot;)&quot;;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    //  return @&quot;ª&quot;;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    /* This works better than a constant NSString for whatever reason.  See above. </td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>     Unicode character              Oct     Dec  Hex     HTML</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>     ª feminine ordinal indicator  0252  170  0xAA  &amp;ordf;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>     */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>3</td>
<td class='sourcelinehit'>    unichar achar = 0xAA;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>3</td>
<td class='sourcelinehit'>    return [NSString stringWithCharacters:&amp;achar length:1];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>3</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot; Creates a new, autoreleased MiscMergeTemplate. &quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>+ (instancetype)template</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    return [[self alloc] init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Creates a new, autoreleased MiscMergeTemplate, and parses aString.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>+ (instancetype)templateWithString:(NSString *)aString</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    return [[self alloc] initWithString:aString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Initializes the MiscMergeTemplate instance and returns self.  This is</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * the designated initializer.  The start and end delimiters are set to the</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * values returned by +#defaultStartDelimiter and +#defaultEndDelimiter.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>- init</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    self = [super init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    if ( self != nil )</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>        [self setTopLevelCommandBlock:[[MiscMergeCommandBlock alloc] init]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>        [self setCommandStack:[NSMutableArray arrayWithObject:[self topLevelCommandBlock]]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>        [self setStartDelimiter:[[self class] defaultStartDelimiter]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>        [self setEndDelimiter:[[self class] defaultEndDelimiter]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    return self;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Initializes the MiscMergeTemplate, then parses string.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>- initWithString:(NSString *)string</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    self = [self init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    if ( self != nil)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>        [self parseString:string];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    return self;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Loads the contents of filename, then calls -#initWithString:.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>- initWithContentsOfFile:(NSString *)filename</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    self = [self init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    if ( self != nil)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        [self parseContentsOfFile:filename];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    return self;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Pushes aBlock on the command stack.  aBlock becomes the current command</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * block until popped off (or another block is placed on top of it).</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>- (void)pushCommandBlock:(MiscMergeCommandBlock *)aBlock</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>    [[self commandStack] addObject:aBlock];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Pops the command block aBlock off of the command stack, so the previous</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * command block will again be the &quot;current&quot; command block.  If aBlock is</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * not at the top of the command stack, logs an error and does nothing.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Basically the same as -#popCommandBlock except it does the extra sanity</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * check.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>31</td>
<td class='sourcelinehit'>- (void)popCommandBlock:(MiscMergeCommandBlock *)aBlock</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>    if (aBlock &amp;&amp; [[self commandStack] lastObject] != aBlock)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        [self reportParseError:@&quot;Error, command stack mismatch&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        return;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>    [self popCommandBlock];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>31</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Pops the top command block off the command stack, so the previous</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * command block will again be the &quot;current&quot; command block.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>- (void)popCommandBlock</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>    if ([[self commandStack] count] &lt;= 1)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        [self reportParseError:@&quot;Error, cannot pop last command block&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        return;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>62</td>
<td class='sourcelinehit'>    [[self commandStack] removeLastObject];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>124</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Returns the &quot;current&quot; command block, i.e. the command block at the top</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * of the command stack.  As they are parsed, commands are always added to</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * the command block returned by this method.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>271</td>
<td class='sourcelinehit'>- (MiscMergeCommandBlock *)currentCommandBlock</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>271</td>
<td class='sourcelinehit'>    return [[self commandStack] lastObject];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>271</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>- (NSString *)resolveTemplateFilename:(NSString *)resolveName</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    NSString *resolvedName = nil;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    id delegate = [self delegate];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    </td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    if ( [delegate respondsToSelector:@selector(mergeTemplate:resolveTemplateFilename:)] )</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        resolvedName = [delegate mergeTemplate:self resolveTemplateFilename:resolveName];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    return ( [resolvedName length] &gt; 0 ) ? resolvedName : resolveName;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Reports the given error message, prefixed with filename and current line</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * number.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>- (void)reportParseError:(NSString *)format, ...</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    NSString *errorMessage;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    va_list args;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    va_start(args, format);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    errorMessage = [[NSString alloc] initWithFormat:format arguments:args];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    va_end(args);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    if ([self filename] != nil)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        NSLog(@&quot;%@: %lu: %@&quot;, [self filename], (unsigned long)[self lineNumber], errorMessage);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    else</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        NSLog(@&quot;Line %lu: %@&quot;, (unsigned long)[self lineNumber], errorMessage);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>208</td>
<td class='sourcelinehit'>- (void)_addCommand:(MiscMergeCommand *)command</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>208</td>
<td class='sourcelinehit'>    [[self currentCommandBlock] addCommand:command];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>208</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>- (void)_addBetweenString:(NSString *)betweenString</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>    NSString *copyString = betweenString;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>    switch ( [self trimWhitespaceBehavior] )</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        case MiscMergeKeepNonBlankWhitespace:</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            if ( [betweenString mm_isBlank] )</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>                copyString = nil;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            break;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            </td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        case MiscMergeTrimWhitespace:</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            copyString = [copyString mm_stringByTrimmingWhitespace];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            break;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        case MiscMergeIgnoreCommandSpaces:</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            copyString = MMStringByTrimmingCommandSpace(copyString);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            break;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            </td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        default:</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>            break;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    /* Check to see if we are ignoring completely blank space or wanting to trim</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    the space off of between strings. In both cases we then see if the trimmed string</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    would result in no data written to the output, then we don&apos;t do anything here. */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>    if ( mm_IsEmpty(copyString) == NO )</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>        id command = [[[MiscMergeCommand classForCommand:@&quot;Copy&quot;] alloc] init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        /* Pass the trimmed string, or the passed in string depending if we are trimming strings */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>        [command parseFromRawString:copyString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>        [self _addCommand:command];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>    _lineNumber += [betweenString mm_numOfString:@&quot;\n&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>98</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>- (void)_addCommandString:(NSString *)commandString</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>    Class commandClass = [MiscMergeCommand classForCommand:commandString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>    id command = [[commandClass alloc] init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>    [self _addCommand:command];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>    [command parseFromString:commandString template:self];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>    _lineNumber += [commandString mm_numOfString:@&quot;\n&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Loads the contents of filename and calls -#parseString:.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>- (void)parseContentsOfFile:(NSString *)filename</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    NSError *err = nil;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    NSString *contentString = [NSString stringWithContentsOfFile:filename encoding:NSUTF8StringEncoding error:&amp;err];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    if ( err != nil )</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        NSLog(@&quot;%@: Error reading template file %@\n%@&quot;, [self class], filename, err);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    else if ( mm_IsEmpty(contentString) == YES)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        NSLog(@&quot;%@: Could not read template file or content blank %@&quot;, [self class], filename);</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    else</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>        [self setFilename:filename];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>        [self parseString:contentString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>/*&quot;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'> * Parses the template in %{string}.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>&quot;*/</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>- (void)parseString:(NSString *)string</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>{</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSMutableString *accumString = [[NSMutableString alloc] init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSScanner *scanner = [NSScanner scannerWithString:string];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSString *currString;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSString *startDelimiter = [self startDelimiter];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSString *endDelimiter = [self endDelimiter];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSInteger nestingLevel = 0;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSInteger maxNestingLevel = 0;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    BOOL inQuotes = NO;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSString *charString = [NSString stringWithFormat:@&quot;\&quot;\\%@%@&quot;, [startDelimiter substringToIndex:1], [endDelimiter substringToIndex:1]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    NSCharacterSet *parseStopChars = [NSCharacterSet characterSetWithCharactersInString:charString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    [scanner setCharactersToBeSkipped:nil];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    _lineNumber = 1;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    // may want to flush localPool every 50 loops or so...</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>241</td>
<td class='sourcelinehit'>    while (![scanner isAtEnd])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>237</td>
<td class='sourcelinehit'>        if ([scanner scanUpToCharactersFromSet:parseStopChars intoString:&amp;currString])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>212</td>
<td class='sourcelinehit'>            [accumString appendString:currString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>237</td>
<td class='sourcelinehit'>        if ([scanner mm_scanString:@&quot;\\&quot;])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>8</td>
<td class='sourcelinehit'>            BOOL     foundDelimiter;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>8</td>
<td class='sourcelinehit'>            NSString *delimiter = nil;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            /* Look for the delimiters.  As a side effect, move scanner along */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>20</td>
<td class='sourcelinehit'>            foundDelimiter = [scanner scanString:startDelimiter intoString:&amp;delimiter] || [scanner scanString:endDelimiter intoString:&amp;delimiter];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            /*</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>             * Leave the backslash if we are not quoting a delimiter string</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>             * -- we would wreak havoc on RTF template files otherwise.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>             * Also leave the backslash if we are deeply nesting or inside</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>             * quotes, as those sections will get reduced later.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>             */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>26</td>
<td class='sourcelinehit'>            if (nestingLevel &gt; 1 || (nestingLevel == 1 &amp;&amp; inQuotes) || !foundDelimiter)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>                [accumString appendString:@&quot;\\&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>8</td>
<td class='sourcelinehit'>            if (foundDelimiter)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>8</td>
<td class='sourcelinehit'>                [accumString appendString:delimiter];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>8</td>
<td class='sourcelinehit'>        }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>229</td>
<td class='sourcelinehit'>        else if ([scanner mm_scanString:@&quot;\&quot;&quot;])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>            [accumString appendString:@&quot;\&quot;&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>            if (nestingLevel == 1) inQuotes = !inQuotes;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>4</td>
<td class='sourcelinehit'>        }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>339</td>
<td class='sourcelinehit'>        else if (nestingLevel &gt; 0 &amp;&amp; [scanner mm_scanString:endDelimiter])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>112</td>
<td class='sourcelinehit'>            if (nestingLevel &gt; 1)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                [accumString appendString:endDelimiter];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>            }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            else</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>                /* Special hack for the delayed parsing stuff. Hm. */</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>110</td>
<td class='sourcelinehit'>                if (maxNestingLevel &gt; 1)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>                {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                    id command = [[[MiscMergeCommand classForCommand:@&quot;DelayedParse&quot;] alloc] init];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                    _lineNumber += [accumString mm_numOfString:@&quot;\n&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                    [command parseFromString:accumString template:self];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                    [self _addCommand:command];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>                else</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>                {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>                    if ([accumString length] &gt; 0)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>108</td>
<td class='sourcelinehit'>                        [self _addCommandString:[accumString copy]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>                }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>110</td>
<td class='sourcelinehit'>                [accumString setString:@&quot;&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>110</td>
<td class='sourcelinehit'>                inQuotes = NO;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>110</td>
<td class='sourcelinehit'>                maxNestingLevel = 0;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>112</td>
<td class='sourcelinehit'>            nestingLevel--;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>112</td>
<td class='sourcelinehit'>        }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>113</td>
<td class='sourcelinehit'>        else if ([scanner mm_scanString:startDelimiter])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>112</td>
<td class='sourcelinehit'>            if (nestingLevel &gt; 0)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>                [accumString appendString:startDelimiter];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>            }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            else</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>110</td>
<td class='sourcelinehit'>                if ([accumString length] &gt; 0)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>97</td>
<td class='sourcelinehit'>                    [self _addBetweenString:[accumString copy]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>110</td>
<td class='sourcelinehit'>                [accumString setString:@&quot;&quot;];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>112</td>
<td class='sourcelinehit'>            nestingLevel++;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>224</td>
<td class='sourcelinehit'>            if (nestingLevel &gt; maxNestingLevel) maxNestingLevel = nestingLevel;</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>112</td>
<td class='sourcelinehit'>        }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>        else if ([scanner mm_scanLetterIntoString:&amp;currString])</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>        {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            // If we can scan the end delimiter, it&apos;s an error, otherwise</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            // it&apos;s just a string that starts with the same char as a</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>            // delimiter.</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>            [accumString appendString:currString];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>0</td>
<td class='sourcelinemissed'>        }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>237</td>
<td class='sourcelinehit'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>    if ([accumString length] &gt; 0)</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>    {</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>        [self _addBetweenString:[accumString copy]];</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>1</td>
<td class='sourcelinehit'>    }</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'>2</td>
<td class='sourcelinehit'>}</td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'></td>
</tr>
<tr class='sourceline'>
<td class='sourcelinehitcount'></td>
<td class='sourcelineskipped'>@end</td>
</tr>

          </table>
        </div>
      </div>
    </body>
  </html>